# 性能优化4/5 -- 耗电优化

* 耗电检查工具
* 耗电三大块
* 常用优化方案


### 耗电检查工具
BatteryHistorian

可直观展示手机的耗电过程。


### 耗电三大块
手机耗电三大块：

* 屏显
* CPU
* 语音通话和用户流量

##### 屏显
应用内调节亮度不合适，一般由系统控制。

##### CPU

Linux内核提供5中变频模式，不同模式下，CPU运行频率不同，功耗也不同。但是需要在Root权限下才能改变频模式。

##### 语音通话和蜂窝流量

WiFi下数据通信比蜂窝流量功耗低，所以尽量在WiFi下进行数据通信。

蜂窝下，尽量降低网络请求频率。

### 常用优化方案

1.浮点运算比整数运算更消耗CPU时间片，耗电也会增加。

避开浮点运算的方法：
* 除法变乘法
* 充分利用移位
* 利用arm neon指令集做并行运算，需要arm v7及以上架构CPU才支持

2.避免WakeLock使用不当

使用完WakeLock，要及时释放。

3.使用JobScheduler

使用JobScheduler在满足一些场景下才执行任务，区分任务的重要性和紧急性。比如WIFI下才进行Log的发送、充电时才进行数据的备份等等。